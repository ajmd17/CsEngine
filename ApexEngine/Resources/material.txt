// Apex 3D material header for shaders

uniform int Material_SpecularTechnique;
uniform int Material_PerPixelLighting;
uniform float Material_Shininess;

uniform int Material_HasDiffuseMap;
uniform int Material_HasNormalMap;
uniform int Material_HasSpecularMap;
uniform int Material_HasHeightMap;

uniform float Env_FogStart;
uniform float Env_FogEnd;

uniform vec4 Material_AmbientColor;
uniform vec4 Material_DiffuseColor;
uniform vec4 Material_SpecularColor;

uniform sampler2D Material_DiffuseMap;
uniform sampler2D Material_NormalMap;
uniform sampler2D Material_SpecularMap;
uniform sampler2D Material_HeightMap;


vec3 CalculateFog(vec3 inColor, vec3 toColor, vec3 worldPos, vec3 camPos, float fogStart, float fogEnd)
{
	float dist = distance(worldPos, camPos);

	float fogFactor = (fogEnd - dist)/(fogEnd - fogStart);
	fogFactor = clamp(fogFactor, 0.0, 1.0);
	return mix(toColor, inColor, fogFactor);
}

vec4 CalculateFog(vec4 inColor, vec4 toColor, vec3 worldPos, vec3 camPos, float fogStart, float fogEnd)
{
	float dist = distance(worldPos, camPos);

	float fogFactor = (fogEnd - dist)/(fogEnd - fogStart);
	fogFactor = clamp(fogFactor, 0.0, 1.0);
	return mix(toColor, inColor, fogFactor);
}